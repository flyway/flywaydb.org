<script src="//content.red-gate.com/js/forms2/js/forms2.min.js"></script>

<div class="modal fade" id="flyway-trial-license-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">License Agreement</h4>
            </div>
            <div class="modal-body">
                <p>Complete the form to receive a trial license key for your organisation. </p>
                <form id="mktoForm_2819"></form>
            </div>
        </div>
    </div>
</div>

<script>MktoForms2.loadForm("//content.red-gate.com", "808-ITG-788", 2819, function(marketoForm) {

    // Update the checkbox label(s).
    var form = marketoForm.getFormElem().get(0);
    var checkboxes = form.querySelectorAll('[type="checkbox"]');
    for (var i=0; i<checkboxes.length; i++) {
        var checkbox = checkboxes[i];
        var labels = form.querySelectorAll('label[for="' + checkbox.getAttribute('name') + '"]');
        var labelText = labels[0].innerText.replace('*', '');
        for (var l=0; l<labels.length; l++) {
            labels[l].innerText = labelText;
        }
        labels[0].parentElement.removeChild(labels[0]);
    }

    // On a successful submission, hide and submit trial form.
    marketoForm.onSuccess(function(formData) {
        // Wait a second to give Marketo time to enter the person into the database
        // before doing the POST request in hideAndSubmitTrialForm().
        window.setTimeout(function(){
            hideAndSubmitTrialForm(formData);
        }, 2000);
        
        return false;
    });
});</script>
