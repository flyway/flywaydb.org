---
layout: firstSteps
pill: api
subtitle: API - First Steps
---
<div id="firstStepsApi">
    <h1>First Steps: API</h1>

    <h2>Prerequisites</h2>
    <ul>
        <li>Java 5+</li>
        <li>A working Maven 2 or 3 install</li>
    </ul>

    <h2>Creating the project</h2>

    <p>We're going to create our project using the Maven Archetype Plugin by issuing the following command:</p>
    <pre class="console">&gt; mvn archetype:generate -B
        -DarchetypeGroupId=org.apache.maven.archetypes
        -DarchetypeArtifactId=maven-archetype-quickstart
        -DarchetypeVersion=1.1
        -DgroupId=foo
        -DartifactId=bar
        -Dversion=1.0-SNAPSHOT
        -Dpackage=foobar</pre>
    <p>We are now ready to get started. Let's jump into our project:</p>
    <pre class="console">&gt; cd bar</pre>

    <h2>Adding the dependencies</h2>

    <p>Let's add Flyway and H2 to our new <code>pom.xml</code>:</p>
    <pre class="prettyprint">&lt;project ...&gt;
    ...
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.googlecode.flyway&lt;/groupId&gt;
            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;
            &lt;version&gt;{{ site.flywayVersion }}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.h2database&lt;/groupId&gt;
            &lt;artifactId&gt;h2&lt;/artifactId&gt;
            &lt;version&gt;1.3.170&lt;/version&gt;
        &lt;/dependency&gt;
        ...
    &lt;/dependencies&gt;
    ...
&lt;/project&gt;</pre>

    <h2>Integrating Flyway</h2>

    <p>Now it's time to integrate Flyway into <code>src/main/java/foobar/App.java</code> and point it to our database:
    </p>

    <pre class="prettyprint">package foobar;

import com.googlecode.flyway.core.Flyway;

public class App {
    public static void main(String[] args) {
        // Create the Flyway instance
        Flyway flyway = new Flyway();

        // Point it to the database
        flyway.setDataSource("jdbc:h2:file:target/foobar", "sa", null);

        // Start the migration
        flyway.migrate();
    }
}</pre>

    <h2>Creating the first migration</h2>

    <p>We create the migration directory <code>src/main/resources/db/migration</code>.<br/>
        Followed by a first migration called <code>src/main/resources/db/migration/V1__Create_person_table.sql</code>:</p>
    <pre class="prettyprint">create table PERSON (
    ID int not null,
    NAME varchar(100) not null
);</pre>

    <h2>Executing our program</h2>

    <p>It's now time to execute our program by issuing this command:</p>
    <pre class="console">bar&gt; mvn package exec:java -Dexec.mainClass=foobar.App</pre>

    <p>If all went well, you should see the following output (timestamps omitted):</p>
    <pre class="console">INFO: Creating Metadata table: "PUBLIC"."schema_version"
INFO: Current version of schema "PUBLIC": &lt;&lt; Empty Schema &gt;&gt;
INFO: Migrating schema "PUBLIC" to version 1
INFO: Successfully applied 1 migration to schema "PUBLIC" (execution time 00:00.062s).</pre>

    <h2>Adding a second migration</h2>

    <p>If we now add a second migration called <code>src/main/resources/db/migration/V2__Add_people.sql</code>:</p>
    <pre class="prettyprint">insert into PERSON (ID, NAME) values (1, 'Axel');
insert into PERSON (ID, NAME) values (2, 'Mr. Foo');
insert into PERSON (ID, NAME) values (3, 'Ms. Bar');</pre>

    <p>and execute it by issuing:</p>
    <pre class="console">bar&gt; mvn package exec:java -Dexec.mainClass=foobar.App</pre>

    <p>We now get:</p>
    <pre class="console">INFO: Current version of schema "PUBLIC": 1
INFO: Migrating schema "PUBLIC" to version 2
INFO: Successfully applied 1 migration to schema "PUBLIC" (execution time 00:00.090s).</pre>

    <h2>Summary</h2>

    <p>In this brief tutorial we saw how to</p>
    <ul>
        <li>integrate Flyway into a project</li>
        <li>configure it so it can talk to our database</li>
        <li>write our first couple of migrations</li>
    </ul>
    <p>These migrations were then successfully found and executed.</p>

    <h2>Next steps</h2>

    <p class="next-steps">
        <a class="btn btn-large btn-primary" href="/documentation/api.html">Read the documentation</a>
        <a class="btn btn-large" href="/documentation/javadoc">Browse the Javadoc</a>
    </p>
</div>